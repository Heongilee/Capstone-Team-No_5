<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : PlainLeaf 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20130902

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
<link rel="stylesheet" type="text/css" href="applytrash.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
  <!-- <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script> -->

  <!-- <script>
    $(document).ready(function(){
      
    });
  </script> -->
  <script>
      $(document).ready(function(){
    $(".button").click(function(){
        //여기서 승인해줘야됨
      $("align-right").hide();
    });
  });
  </script>
<title></title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" rel="stylesheet" />
<link href="default.css" rel="stylesheet" type="text/css" media="all" />
<link href="fonts.css" rel="stylesheet" type="text/css" media="all" />

<!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
<script>
  firebase.initializeApp({
    apiKey: "AIzaSyDfLG-WSkckQnW0m95_4Jz2lYH5mAlzIzo",
    authDomain: "capstone-no5.firebaseapp.com",
    databaseURL: "https://capstone-no5.firebaseio.com",
    projectId: "capstone-no5",
    storageBucket: "capstone-no5.appspot.com",
    messagingSenderId: "80279008633",
    appId: "1:80279008633:web:9f59fbcca33ef8a8cdaba8",
    measurementId: "G-EQ9RSJSGE6"
  });
</script>
</head>
<body>
<div id="header" class="container">
   <div id="logo">
      <h1><a href="index.html">강남구청</a></h1>
   </div>
   <div id="menu">
      <ul>
         <li class="active"><a href="index.html" accesskey="1" title="">Homepage</a></li>
         <li><a href="applytrash.html" accesskey="3" title="">대형폐기물 수거신청</a></li>
      </ul>
   </div>
</div>
<div id="featured" class="container" >
   <div class="align-left">
        <div class="slider"  width= auto; height= auto; max-width= 400px; max-height= 300px;>
          <!-- <img src="https://firebasestorage.googleapis.com/v0/b/capstone-no5.appspot.com/o/reservationList_assetImage%2Ffishtank001.png?alt=media&token=2ff08756-2b53-4ad7-b99e-15cad89980d7" alt="대형 폐기물">
          <img src="https://firebasestorage.googleapis.com/v0/b/capstone-no5.appspot.com/o/reservationList_assetImage%2Fbag001.jpg?alt=media&token=9c7e001c-65d4-40ab-8906-f9aa0024cbde" alt="대형 폐기물"> -->
        </div>
   </div>
   <div class="align-right">
     <div class='align-right-contents'>
     </div>
      <a href="#" class="button">승인하기</a>
   </div>
</div>
<div id="copyright" class="container">
   <p>&copy; Untitled. All rights reserved. | Photos by <a href="http://fotogrph.com/">Fotogrph</a> | Design by <a href="http://templated.co" rel="nofollow">TEMPLATED</a>.</p>
</div>
<script>
  $(document).ready(function () {
    var mySlider = $('.slider').bxSlider();
    var db = firebase.firestore();
    var docRef = db.collection("reservation");

    docRef.get().then(function (querySnapshot) {
      // 이미지 태그를 참조할 문서 객체
      var myImgSlider = document.getElementsByClassName('slider');
      var myContents = document.getElementsByClassName('align-right-contents');

      if(querySnapshot){
        querySnapshot.forEach(function (doc) {
          // class는 align-right
          let docs = doc.data();
          ImgFileLength = docs['reserveFiles'].length;

          for(let item in docs){
            // alert('key : ' + item); // alert('value : '+ docs[item]);
            if(item == "reserveAddress"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "주소 : " + docs[item];
              myContents[0].appendChild(newP);
            } else if(item == "reserveDate"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "예약 날짜 : " + docs[item];
              myContents[0].appendChild(newP);
            } else if(item == "reserveFiles"){
              for(var i = 0;i < docs[item].length; i++){
                var newImg = document.createElement("img");
                newImg.setAttribute("src", docs[item][i]);
                newImg.setAttribute("alt", "폐기물 사진");
                // TODO : https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js 참고
                myImgSlider[0].appendChild(newImg);
                $('.slider').append(newImg);
              }
            } else if(item == "reserveId"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "아이디 : " + docs[item];
              myContents[0].appendChild(newP);
            } else if(item == "reserveItems"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              var str = "";
              for(var i = 0;i < docs[item].length;i++){
                str = str.concat(docs[item][i]);
                if(i != docs[item].length - 1) str = str.concat(", ");
              }
              newP.innerHTML = "항목 : " + str;
              myContents[0].appendChild(newP);
            } else if(item == "reserveState"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "상태 : " + docs[item];
              myContents[0].appendChild(newP);
            } else if(item == "reserveVisitDate"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "방문 희망 날짜 : " + docs[item];
              myContents[0].appendChild(newP);
            } else if(item == "reserveVisitTime"){
              var newP = document.createElement("p");
              newP.setAttribute("id", "mystylecss01");
              newP.innerHTML = "방문 희망 시간 : " + docs[item];
              myContents[0].appendChild(newP);
            } else {
              // ???
            }
          }
        });
      } else{
        // doc.data() will be undefined in this case
        console.log("No such doc!!");
      }
    }).catch(function (error) {
      console.log("Error getting document: ", error);
    });

    // TODO : Output ERROR...
    mySlider.reloadSlider();
  });
</script>
</body>
</html>